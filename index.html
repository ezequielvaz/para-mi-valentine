<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para ti ‚ù§Ô∏è</title>
    
    <style>
        /* Importaciones siempre arriba */
        @import url('https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

        /* --- ESTILOS GENERALES --- */
        body {
            margin: 0; padding: 0; width: 100vw; height: 100vh; overflow: hidden;
            font-family: 'Poppins', sans-serif;
            display: flex; justify-content: center; align-items: center;
            background: url('fondo.jpeg') no-repeat center center fixed; 
            background-size: cover;
        }
        body::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4); z-index: -1;
        }
        .handwritten { font-family: 'Indie Flower', cursive; color: #8b0000; font-weight: bold; }

        /* --- PANTALLA DE INICIO --- */
        #pantalla-inicio {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #fce4ec; z-index: 1000; cursor: pointer;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .heart-beat { font-size: 4rem; animation: beat 1s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* --- ESCENA 1: EL SOBRE --- */
        .sobre-container {
            position: absolute; width: 300px; cursor: pointer;
            transform: translateX(150vw); transition: transform 1.5s cubic-bezier(0.25, 1, 0.5, 1);
            z-index: 200; display: flex; flex-direction: column; align-items: center;
        }
        .sobre-img { width: 100%; max-width: 280px; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.2)); }

        /* --- ESCENA 2: CARTA Y RULETA --- */
        .scene-container {
            position: relative; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 1s; pointer-events: none;
        }
        .scene-visible { opacity: 1; pointer-events: auto; }

        .carta-container {
            width: 300px; height: 380px;
            background-color: #f8f5e6;
            background-image: linear-gradient(to right, #e29898 2px, transparent 2px),
                repeating-linear-gradient(to bottom, #b0b0b0 0, #b0b0b0 1px, transparent 1px, transparent 35px);
            background-position: 40px 0, 0 35px;
            padding: 50px 30px 40px 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center; z-index: 100;
            transform: rotate(-2deg); position: relative; box-sizing: border-box;
            display: flex; flex-direction: column; justify-content: center;
        }
        .carta-container h2 { font-size: 2rem; margin-bottom: 40px; line-height: 1.3; }

        /* RULETA CIRCULAR (40s) */
        .orbit-container {
            position: absolute; width: 700px; height: 700px; z-index: 150;
            border-radius: 50%; animation: spinOrbit 40s linear infinite; pointer-events: none;
        }
        @keyframes spinOrbit { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .photo-wrapper {
            position: absolute; width: 90px; height: 90px; margin-top: -45px; margin-left: -45px;
            animation: spinPhoto 40s linear infinite reverse;
        }
        @keyframes spinPhoto { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .photo-frame {
            width: 100%; height: 100%; border-radius: 50%; border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); overflow: hidden; background: white;
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }

        .pos-1 { top: 0%; left: 50%; } .pos-2 { top: 25%; left: 93.3%; }
        .pos-3 { top: 75%; left: 93.3%; } .pos-4 { top: 100%; left: 50%; }
        .pos-5 { top: 75%; left: 6.7%; } .pos-6 { top: 25%; left: 6.7%; }

        @media (max-width: 600px) {
            .orbit-container { width: 450px; height: 450px; }
            .photo-wrapper { width: 70px; height: 70px; margin-top: -35px; margin-left: -35px; }
            .carta-container { width: 280px; height: 360px; }
        }

        /* BOTONES (PEGADITOS) */
        .checkbox-container { 
            display: flex; justify-content: center; gap: 5px; 
            margin-bottom: 50px; padding-left: 0; position: relative; z-index: 200; 
        }
        .checkbox-wrapper { display: flex; align-items: center; gap: 5px; cursor: pointer; }
        .custom-checkbox { width: 30px; height: 30px; border: 3px solid #8b0000; border-radius: 5px; display: flex; justify-content: center; align-items: center; font-size: 24px; color: #8b0000; background: white; }
        .checked .custom-checkbox::after { content: '‚úì'; font-family: 'Indie Flower', cursive; font-weight: bold; }
        .checkbox-wrapper span { font-size: 1.8rem; }
        .fake-no span { color: #d32f2f; } .fake-no .custom-checkbox { border-color: #d32f2f; color: #d32f2f; }
        
        /* --- ESCENA 3: EL DRAMA Y EL LIBRO --- */
        .drama-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 500; pointer-events: none; opacity: 0;
            background: rgba(0,0,0,0.85);
            transition: opacity 1s;
        }

        .drama-text {
            color: white; font-size: 2rem; font-weight: bold; margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
            text-align: center;
            min-height: 60px;
            opacity: 1; transition: opacity 0.5s;
        }

        /* FOTOS SUELTAS */
        .single-photo-container {
            display: flex; justify-content: center; align-items: center;
            width: 100%;
        }
        .single-photo {
            max-width: 85%; max-height: 50vh;
            border: 5px solid white; border-radius: 10px;
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
            object-fit: contain;
            animation: popIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* LIBRO 3D */
        .book-wrapper {
            position: relative; width: 300px; height: 420px;
            perspective: 2000px; transform-style: preserve-3d;
            display: none;
        }

        .book {
            position: relative; width: 100%; height: 100%;
            transform-style: preserve-3d; transition: transform 1s;
        }
        .book-open-state { transform: translateX(50%); }

        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            transform-origin: left; transform-style: preserve-3d;
            transition: transform 1.5s cubic-bezier(0.645, 0.045, 0.355, 1);
            border-radius: 5px 15px 15px 5px;
        }

        .cover { z-index: 25; background-color: #5d4037; }
        .cover-front {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            /* SE USA PORTADA.JPEG */
            background: url('portada.jpeg') no-repeat center center; background-size: cover;
            border-radius: 5px 15px 15px 5px; box-shadow: 10px 10px 30px rgba(0,0,0,0.5);
        }
        .cover-back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            background-color: #fff; transform: rotateY(180deg); border-radius: 5px 15px 15px 5px;
        }

        .paper { background-color: #f8f5e6; display: flex; justify-content: center; align-items: center; }
        .paper-front, .paper-back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            display: flex; flex-direction: column; justify-content: flex-start; align-items: center; 
            padding: 15px; box-sizing: border-box;
            background-image: repeating-linear-gradient(to right, #e0d0b0 0, #e0d0b0 1px, transparent 1px, transparent 10px);
            border-radius: 5px 15px 15px 5px; border: 1px solid #dcd0b0;
        }
        .paper-back { transform: rotateY(180deg); }

        .page-content {
            position: relative; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .glued-photo {
            width: 90%; height: auto; max-height: 75%; 
            border: 5px solid white; border-bottom: 20px solid white;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2); object-fit: cover;
            transform: rotate(-2deg);
        }

        .caption {
            font-family: 'Indie Flower', cursive;
            color: #5d4037; font-size: 1.2rem; margin-top: 15px;
            text-align: center; font-weight: bold; line-height: 1.2;
        }

        .sticker {
            font-size: 3rem; position: absolute; bottom: 5px; right: 5px;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2)); transform: rotate(-10deg);
        }
        
        .flipped { transform: rotateY(-180deg); }

        /* Z-INDEX REAJUSTADO PARA 11 P√ÅGINAS + PORTADA */
        #page1 { z-index: 22; } #page2 { z-index: 21; } #page3 { z-index: 20; }
        #page4 { z-index: 19; } #page5 { z-index: 18; } #page6 { z-index: 17; }
        #page7 { z-index: 16; } #page8 { z-index: 15; } #page9 { z-index: 14; }
        #page10 { z-index: 13; } #page11 { z-index: 12; }

        @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* --- NUEVO: ESCENA DEL "NO" DIRECTO --- */
        #escenaNoDirecto {
            display: none; /* Oculto por defecto */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 2000;
            justify-content: center; align-items: center; flex-direction: column;
            opacity: 0; transition: opacity 0.5s ease-in;
        }

    </style>
</head>
<body>

    <audio id="music" loop>
        <source src="cancion.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-puerta">
        <source src="puerta.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-broma">
        <source src="broma.mp3" type="audio/mpeg">
    </audio>

    <div id="pantalla-inicio" onclick="iniciarExperiencia()">
        <div class="heart-beat">üíå</div>
        <p style="color: #d81b60; margin-top: 20px; font-weight: bold;">Toca para empezar</p>
    </div>

    <div class="sobre-container" id="sobre" onclick="abrirSobre()">
        <img src="sobre.png" alt="Carta" class="sobre-img">
    </div>

    <div class="scene-container" id="escenaPrincipal">
        <div class="orbit-container">
            <div class="pos-1 photo-wrapper"><div class="photo-frame"><img src="foto1.jpeg"></div></div>
            <div class="pos-2 photo-wrapper"><div class="photo-frame"><img src="foto2.jpeg"></div></div>
            <div class="pos-3 photo-wrapper"><div class="photo-frame"><img src="foto3.jpeg"></div></div>
            <div class="pos-4 photo-wrapper"><div class="photo-frame"><img src="foto4.jpeg"></div></div>
            <div class="pos-5 photo-wrapper"><div class="photo-frame"><img src="foto5.jpeg"></div></div>
            <div class="pos-6 photo-wrapper"><div class="photo-frame"><img src="foto6.jpeg"></div></div>
        </div>
        <div class="carta-container">
            <h2 class="handwritten">¬øQUIERES SER MI SAN VALENT√çN?</h2>
            <div class="checkbox-container">
                <div class="checkbox-wrapper" id="si-wrapper" onclick="activarSi()">
                    <div class="custom-checkbox" id="si-box"></div>
                    <span class="handwritten" id="si-text">S√ç</span>
                </div>
                <div class="checkbox-wrapper" id="no-wrapper" onclick="activarNoDirecto()">
                    <div class="custom-checkbox" id="no-box"></div>
                    <span class="handwritten" id="no-text">NO</span>
                </div>
            </div>
            <div style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); font-size: 1.8rem; filter: sepia(0.6);">‚ù§Ô∏è üå∏ üôÇ</div>
        </div>
    </div>

    <div id="escenaNoDirecto">
        <img src="fotono.jpeg" style="max-width: 90%; max-height: 70vh; border: 5px solid white; border-radius: 10px; box-shadow: 0 0 30px rgba(255,255,255,0.2);">
        <p style="color: white; font-family: 'Indie Flower', cursive; font-size: 2.5rem; margin-top: 30px;">üò¢üíî</p>
    </div>


    <div class="drama-container" id="dramaScreen">
        <div class="drama-text" id="dramaText"></div>
        <div class="single-photo-container" id="singlePhotoContainer"></div>
        
        <div class="book-wrapper" id="bookWrapper">
            <div class="book" id="theBook">
                <div class="page cover" id="coverPage"><div class="cover-front"></div><div class="cover-back"></div></div>
                <div class="page paper" id="page1"><div class="paper-front"><div class="page-content"><img src="foto11.jpeg" class="glued-photo"><p class="caption">Nuestro primer carrete juntos</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page2"><div class="paper-front"><div class="page-content"><img src="foto12.jpeg" class="glued-photo"><div class="sticker">üòèüòà</div></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page3"><div class="paper-front"><div class="page-content"><img src="foto13.jpeg" class="glued-photo"><p class="caption">D√≠a maravilloso juntos</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page4"><div class="paper-front"><div class="page-content"><img src="foto14.jpeg" class="glued-photo"><p class="caption">Bellakitos</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page5"><div class="paper-front"><div class="page-content"><img src="foto15.jpeg" class="glued-photo"><p class="caption">Mi foto favorita</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page6"><div class="paper-front"><div class="page-content"><img src="foto16.jpeg" class="glued-photo"><p class="caption">Nochotlos en el futuro</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page7"><div class="paper-front"><div class="page-content"><img src="foto17.jpeg" class="glued-photo"><p class="caption">Primer ramito</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page8"><div class="paper-front"><div class="page-content"><img src="foto18.jpeg" class="glued-photo"><p class="caption">As√≠ es como yo te veo</p></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page9"><div class="paper-front"><div class="page-content"><img src="foto19.jpeg" class="glued-photo"><div class="sticker">üî•üî•üî•</div></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page10"><div class="paper-front"><div class="page-content"><img src="foto20.jpeg" class="glued-photo"><div class="sticker">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div></div></div><div class="paper-back"></div></div>
                <div class="page paper" id="page11"><div class="paper-front"><div class="page-content"><img src="foto21.jpeg" class="glued-photo"><p class="caption">Sigamos haciendo m√°s recuerdos juntitos</p><div class="sticker">üòçü•π</div></div></div><div class="paper-back"></div></div>
            </div>
        </div>
    </div>

    <script>
        // --- PUNTO 3: Funci√≥n Helper para crear im√°genes (DOM Seguro) ---
        function mostrarFotoDinamica(src) {
            const container = document.getElementById('singlePhotoContainer');
            container.innerHTML = '';
            const img = document.createElement('img');
            img.src = src;
            img.className = 'single-photo';
            img.style.borderColor = (src.includes('22')) ? '#d81b60' : 'white';
            container.appendChild(img);
        }

        function iniciarExperiencia() {
            const inicio = document.getElementById('pantalla-inicio');
            inicio.style.opacity = '0';
            setTimeout(() => { inicio.style.display = 'none'; }, 500);
            
            const timbre = document.getElementById('sfx-puerta');
            timbre.volume = 0.8;
            timbre.play().catch(e => console.log(e));

            setTimeout(() => { document.getElementById('sobre').style.transform = "translateX(0)"; }, 100);
        }

        function abrirSobre() {
            const sobre = document.getElementById('sobre');
            sobre.style.opacity = "0"; sobre.style.transform = "scale(1.5)";
            setTimeout(() => { sobre.style.display = "none"; }, 500);
            setTimeout(() => { document.getElementById('escenaPrincipal').classList.add('scene-visible'); }, 300);
        }

        // --- FUNCI√ìN SI APRETA "S√ç" ---
        function activarSi() {
            const noWrapper = document.getElementById('no-wrapper');
            noWrapper.classList.add('checked'); // Truco visual: Marca el NO
            
            // IMPORTANTE: Desactivamos el clic en el NO para que no interrumpa el drama
            noWrapper.removeAttribute('onclick');

            setTimeout(() => { comenzarSecuenciaDrama(); }, 2000);
        }

        // --- NUEVA FUNCI√ìN: SI APRETA "NO" DIRECTAMENTE ---
        function activarNoDirecto() {
            // 1. Marcar visualmente
            document.getElementById('no-wrapper').classList.add('checked');

            // 2. Ocultar la escena principal gradualmente
            document.getElementById('escenaPrincipal').style.opacity = '0';

            // 3. Mostrar la escena del NO rotundo
            const escenaNo = document.getElementById('escenaNoDirecto');
            escenaNo.style.display = 'flex'; // Hacerla visible en el layout
            
            // Peque√±o delay para que la transici√≥n de opacidad funcione
            setTimeout(() => {
                escenaNo.style.opacity = '1';
            }, 100);
        }


        function comenzarSecuenciaDrama() {
            const escena = document.getElementById('escenaPrincipal');
            escena.style.opacity = "0";
            setTimeout(() => { escena.style.display = "none"; }, 800);

            const dramaScreen = document.getElementById('dramaScreen');
            dramaScreen.style.opacity = "1";
            dramaScreen.style.pointerEvents = "auto";

            const dramaText = document.getElementById('dramaText');
            const bromaAudio = document.getElementById('sfx-broma');

            // FOTO 7
            dramaText.innerText = "¬øSegura que no quieres? ü§®";
            mostrarFotoDinamica('foto7.jpeg');

            // FOTO 8
            setTimeout(() => {
                dramaText.innerText = "Quiz√°s esto te haga cambiar de parecer...";
                mostrarFotoDinamica('foto8.jpeg');
            }, 3000);

            // FOTO 9 (R√°pido + M√∫sica)
            setTimeout(() => {
                bromaAudio.volume = 1.0;
                bromaAudio.play().catch(e => console.log(e));
                dramaText.innerText = "";
                mostrarFotoDinamica('foto9.jpeg');
            }, 6000);

            // FOTO 10 (R√°pido)
            setTimeout(() => {
                mostrarFotoDinamica('foto10.jpeg');
            }, 8000);

            // NA MENTIRA
            setTimeout(() => {
                bromaAudio.pause(); bromaAudio.currentTime = 0;
                const musica = document.getElementById('music');
                musica.volume = 0.5; musica.play().catch(e => console.log(e));

                document.getElementById('singlePhotoContainer').innerHTML = "";
                dramaText.style.fontSize = "3.5rem";
                dramaText.innerText = "¬°NA MENTIRA XD! ü§£";
            }, 10000);

            // MOSTRAR LIBRO
            setTimeout(() => {
                dramaText.style.fontSize = "2rem";
                dramaText.innerText = "Mira nuestra historia... ‚ù§Ô∏è";
                document.getElementById('bookWrapper').style.display = "block"; 
                abrirLibroSecuencia();
            }, 14000);
        }

        // --- PUNTO 2: Loop Optimizado ---
        function abrirLibroSecuencia() {
            const book = document.getElementById('theBook');
            const cover = document.getElementById('coverPage');
            const totalPaginas = 11; 
            const tiempoPorPagina = 6000; 

            setTimeout(() => { book.classList.add('book-open-state'); }, 100);
            setTimeout(() => { cover.classList.add('flipped'); }, 600);

            for (let i = 1; i <= totalPaginas; i++) {
                setTimeout(() => {
                    document.getElementById(`page${i}`).classList.add('flipped');
                }, tiempoPorPagina * i);
            }
            
            setTimeout(() => { cerrarYFinal(); }, tiempoPorPagina * (totalPaginas + 1));
        }

        function cerrarYFinal() {
            const dramaText = document.getElementById('dramaText');
            dramaText.innerText = "¬°TE AMO! ‚ù§Ô∏è";
            dramaText.style.fontSize = "3rem";

            const bookWrapper = document.getElementById('bookWrapper');
            bookWrapper.style.transition = "opacity 1s";
            bookWrapper.style.opacity = "0";
            
            setTimeout(() => {
                bookWrapper.style.display = "none";
                mostrarFotoDinamica('foto22.jpeg'); // Foto final
            }, 1000);
        }
    </script>
</body>
</html>
